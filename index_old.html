<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Comparativo de Preços - Market4You vs Seven vs Flash</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .filters {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .filter-group {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .filter-item {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        
        select, input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .kpi-card {
            text-align: center;
        }
        
        .kpi-value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .kpi-label {
            color: #666;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .market-color { color: #ef4444; }
        .seven-color { color: #22c55e; }
        .flash-color { color: #3b82f6; }
        .economia { color: #10b981; }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }
        
        .table-container {
            max-height: 500px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px;
            text-align: left;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        td {
            padding: 10px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        tr:hover {
            background: #f9fafb;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 600;
        }
        
        .badge-market {
            background: #fee2e2;
            color: #dc2626;
        }
        
        .badge-seven {
            background: #dcfce7;
            color: #15803d;
        }
        
        .badge-flash {
            background: #dbeafe;
            color: #1e40af;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>📊 Comparativo de Preços: Market4You vs Seven vs Flash</h1>
        
        <div class="filters">
            <div class="filter-group">
                <div class="filter-item">
                    <label for="categoryFilter">Filtrar por Categoria:</label>
                    <select id="categoryFilter">
                        <option value="">Todas as Categorias</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label for="searchFilter">Buscar Produto:</label>
                    <input type="text" id="searchFilter" placeholder="Digite o nome do produto...">
                </div>
                <div class="filter-item">
                    <label for="priceFilter">Mostrar apenas:</label>
                    <select id="priceFilter">
                        <option value="">Todos os produtos</option>
                        <option value="Market4You">Mais baratos no Market4You</option>
                        <option value="Seven">Mais baratos no Seven</option>
                        <option value="Flash">Mais baratos no Flash</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="dashboard-grid">
            <div class="card kpi-card">
                <div class="kpi-label">Total de Produtos</div>
                <div class="kpi-value" style="color: #6366f1" id="totalProdutos">0</div>
            </div>
            <div class="card kpi-card">
                <div class="kpi-label">Mais Baratos Market4You</div>
                <div class="kpi-value market-color" id="marketMelhor">0</div>
            </div>
            <div class="card kpi-card">
                <div class="kpi-label">Mais Baratos Seven</div>
                <div class="kpi-value seven-color" id="sevenMelhor">0</div>
            </div>
            <div class="card kpi-card">
                <div class="kpi-label">Mais Baratos Flash</div>
                <div class="kpi-value flash-color" id="flashMelhor">0</div>
            </div>
        </div>
        
        <div class="card">
            <h3>💰 Economia Máxima Possível</h3>
            <div style="text-align: center; padding: 20px;">
                <div class="kpi-value economia" id="economiaMaxima">R$ 0</div>
                <p style="color: #666; margin-top: 10px;">Comprando sempre o produto mais barato entre os três mercados</p>
            </div>
        </div>
        
        <div class="dashboard-grid">
            <div class="card">
                <h3>Distribuição de Melhores Preços</h3>
                <div class="chart-container">
                    <canvas id="distributionChart"></canvas>
                </div>
            </div>
            <div class="card">
                <h3>Comparativo por Categoria</h3>
                <div class="chart-container">
                    <canvas id="categoriaChart"></canvas>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h3>Top 15 Maiores Economias no Flash</h3>
            <div class="chart-container" style="height: 400px;">
                <canvas id="topEconomiaChart"></canvas>
            </div>
        </div>
        
        <div class="card">
            <h3>Tabela Detalhada de Produtos</h3>
            <div class="table-container">
                <table id="productTable">
                    <thead>
                        <tr>
                            <th>Categoria</th>
                            <th>Produto</th>
                            <th>Market4You</th>
                            <th>Seven</th>
                            <th>Flash</th>
                            <th>Melhor Preço</th>
                            <th>Economia</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script>
        // Dados processados e incorporados
        const dadosCompletos = [
            {"categoria":"Bebidas","produto":"Bebida Láctea TODDYNHO Tradicional 200ml","market":5.39,"seven":4.19,"flash":4.15,"melhor":"Flash","economia":1.24},
            {"categoria":"Bebidas","produto":"Bebida Mista SMIRNOFF ICE Original 275ml","market":13.69,"seven":10.99,"flash":9.9,"melhor":"Flash","economia":3.79},
            {"categoria":"Bebidas","produto":"Cerveja AMSTEL Lager Sleek Lata 350ml","market":6.39,"seven":4.89,"flash":4.19,"melhor":"Flash","economia":2.20},
            {"categoria":"Bebidas","produto":"Cerveja BRAHMA Duplo Malte Lata 350ml","market":6.59,"seven":5.99,"flash":4.99,"melhor":"Flash","economia":1.60},
            {"categoria":"Bebidas","produto":"Cerveja BRAHMA Sleek Lata 350ml","market":6.49,"seven":5.98,"flash":4.99,"melhor":"Flash","economia":1.50},
            {"categoria":"Bebidas","produto":"Cerveja BUDWEISER Lata 410ml","market":7.99,"seven":5.99,"flash":6.19,"melhor":"Seven","economia":2.00},
            {"categoria":"Bebidas","produto":"Cerveja SKOL Lata Sleek 310ml","market":5.99,"seven":4.98,"flash":4.99,"melhor":"Seven","economia":1.01},
            {"categoria":"Bebidas","produto":"Cerveja SKOL Puro Malte Lata 350ml","market":6.19,"seven":5.74,"flash":4.99,"melhor":"Flash","economia":1.20},
            {"categoria":"Bebidas","produto":"Refrigerante COCA-COLA Lata 310ml","market":4.39,"seven":3.99,"flash":3.99,"melhor":"Seven","economia":0.40},
            {"categoria":"Bebidas","produto":"Refrigerante COCA-COLA Sem Açúcar Lata 310ml","market":4.39,"seven":3.99,"flash":3.99,"melhor":"Seven","economia":0.40},
            {"categoria":"Bebidas","produto":"Refrigerante GUARANÁ ANTARCTICA Lata 350ml","market":4.39,"seven":3.99,"flash":3.89,"melhor":"Flash","economia":0.50},
            {"categoria":"Bebidas","produto":"Refrigerante H2OH! Limoneto 500ml","market":3.89,"seven":4.99,"flash":0,"melhor":"Market4You","economia":0},
            {"categoria":"Bebidas","produto":"Refrigerante H2OH! Limão 500ml","market":3.89,"seven":4.99,"flash":0,"melhor":"Market4You","economia":0},
            {"categoria":"Bebidas","produto":"Suco DEL VALLE FRESH Limão 500ml","market":6.19,"seven":4.79,"flash":0,"melhor":"Seven","economia":1.40},
            {"categoria":"Bebidas","produto":"Suco DEL VALLE Mais Manga 1l","market":5.59,"seven":5.79,"flash":0,"melhor":"Market4You","economia":0},
            {"categoria":"Bebidas","produto":"Whisky Jack Daniel's Black 375ml","market":87.9,"seven":79.9,"flash":0,"melhor":"Seven","economia":8.00},
            {"categoria":"Bebidas","produto":"Vinho Tinto Malbec TORO 750ml","market":54.49,"seven":48.9,"flash":8.91,"melhor":"Flash","economia":45.58},
            {"categoria":"Congelados","produto":"Bacon em fatias Pamplona 150g","market":17.9,"seven":13.99,"flash":0,"melhor":"Seven","economia":3.91},
            {"categoria":"Congelados","produto":"Filé de Peito de Frango Bandeja (Kg)","market":21.9,"seven":17.99,"flash":0,"melhor":"Seven","economia":3.91},
            {"categoria":"Congelados","produto":"Linguiça de Frango Seara 900g","market":18.9,"seven":16.9,"flash":13.9,"melhor":"Flash","economia":5.00},
            {"categoria":"Congelados","produto":"Linguiça Toscana Sadia 500g","market":14.99,"seven":15.9,"flash":0,"melhor":"Market4You","economia":0},
            {"categoria":"Congelados","produto":"Hambúrguer Bovino Sadia 672g","market":29.9,"seven":29.9,"flash":0,"melhor":"Market4You","economia":0},
            {"categoria":"Congelados","produto":"Peito de Frango Temperado Sadia 1kg","market":22.9,"seven":23.9,"flash":0,"melhor":"Market4You","economia":0},
            {"categoria":"Congelados","produto":"Empanado de Frango Perdigão 300g","market":14.49,"seven":10.9,"flash":0,"melhor":"Seven","economia":3.59},
            {"categoria":"Congelados","produto":"Esfiha de Carne O SALGADEIRO - 250g","market":38.9,"seven":33.4,"flash":10.41,"melhor":"Flash","economia":28.49},
            {"categoria":"Congelados","produto":"Hambúrguer de Carne Bovino Futuro Burger 230g","market":19.9,"seven":17.9,"flash":13.99,"melhor":"Flash","economia":5.91},
            {"categoria":"Congelados","produto":"Lasanha Bolonhesa Sadia 600g","market":23.9,"seven":21.9,"flash":16.99,"melhor":"Flash","economia":6.91},
            {"categoria":"Congelados","produto":"Pizza Mussarela Sadia 440g","market":18.9,"seven":13.9,"flash":10.99,"melhor":"Flash","economia":7.91},
            {"categoria":"Congelados","produto":"Steak de Frango Seara 100g","market":20.99,"seven":17.9,"flash":0,"melhor":"Seven","economia":3.09},
            {"categoria":"Congelados","produto":"Pão de Queijo C/ Parmesão TIROLEZ 300g","market":29.99,"seven":16.8,"flash":7.8,"melhor":"Flash","economia":22.19},
            {"categoria":"Congelados","produto":"Bolinha de Queijo MANIA FOODS 500g","market":34.96,"seven":0,"flash":6.99,"melhor":"Flash","economia":27.97},
            {"categoria":"Congelados","produto":"Coxinha de Frango MANIA FOODS C/ Catupiry 500g","market":34.96,"seven":0,"flash":6.99,"melhor":"Flash","economia":27.97},
            {"categoria":"Cuidados Pessoais","produto":"Creme Dental COLGATE Tripla Ação 90g","market":3.99,"seven":2.99,"flash":2.05,"melhor":"Flash","economia":1.94},
            {"categoria":"Cuidados Pessoais","produto":"Desodorante Aerosol DOVE Original 150ml","market":16.9,"seven":13.9,"flash":11.89,"melhor":"Flash","economia":5.01},
            {"categoria":"Cuidados Pessoais","produto":"Desodorante Roll-on NIVEA Invisible Black & White 50ml","market":13.9,"seven":11.9,"flash":8.75,"melhor":"Flash","economia":5.15},
            {"categoria":"Cuidados Pessoais","produto":"Sabonete LUX Botanicals Flor de Cerejeira 85g","market":2.99,"seven":2.49,"flash":1.89,"melhor":"Flash","economia":1.10},
            {"categoria":"Cuidados Pessoais","produto":"Shampoo HEAD & SHOULDERS Anticaspa 200ml","market":19.9,"seven":16.9,"flash":11.79,"melhor":"Flash","economia":8.11},
            {"categoria":"Doces","produto":"Barra de Chocolate ao Leite NEUGEBAUER 90g","market":6.99,"seven":5.49,"flash":0,"melhor":"Seven","economia":1.50},
            {"categoria":"Doces","produto":"Biscoito BONO Recheado Chocolate 126g","market":3.39,"seven":2.49,"flash":2.29,"melhor":"Flash","economia":1.10},
            {"categoria":"Doces","produto":"Biscoito Club Social Original 144g","market":5.99,"seven":4.59,"flash":3.39,"melhor":"Flash","economia":2.60},
            {"categoria":"Doces","produto":"Biscoito NEGRESCO 90g","market":3.19,"seven":2.49,"flash":2.29,"melhor":"Flash","economia":0.90},
            {"categoria":"Doces","produto":"Biscoito OREO Original 90g","market":3.19,"seven":2.49,"flash":2.29,"melhor":"Flash","economia":0.90},
            {"categoria":"Doces","produto":"Biscoito Passatempo Recheado Chocolate 130g","market":3.69,"seven":2.99,"flash":2.29,"melhor":"Flash","economia":1.40},
            {"categoria":"Doces","produto":"Biscoito Recheado TRAKINAS Chocolate 126g","market":3.39,"seven":2.69,"flash":2.29,"melhor":"Flash","economia":1.10},
            {"categoria":"Doces","produto":"Biscoito Wafer BAUDUCCO Chocolate 140g","market":3.69,"seven":3.29,"flash":2.69,"melhor":"Flash","economia":1.00},
            {"categoria":"Doces","produto":"Chocolate BIS ao Leite 126g","market":8.79,"seven":7.99,"flash":7.09,"melhor":"Flash","economia":1.70},
            {"categoria":"Doces","produto":"Chocolate KitKat 41.5g","market":3.99,"seven":3.29,"flash":2.99,"melhor":"Flash","economia":1.00},
            {"categoria":"Doces","produto":"Chocolate LACTA Diamante Negro 90g","market":8.49,"seven":6.49,"flash":5.89,"melhor":"Flash","economia":2.60},
            {"categoria":"Doces","produto":"Chocolate MILKA Oreo 100g","market":9.99,"seven":8.49,"flash":0,"melhor":"Seven","economia":1.50},
            {"categoria":"Doces","produto":"Chocolate Snickers 45g","market":3.49,"seven":2.99,"flash":2.99,"melhor":"Seven","economia":0.50},
            {"categoria":"Doces","produto":"Cookie BAUDUCCO Chocolate 100g","market":4.99,"seven":3.79,"flash":3.29,"melhor":"Flash","economia":1.70},
            {"categoria":"Doces","produto":"Cookie Toddy Baunilha com Gotas de Chocolate 133g","market":5.49,"seven":3.99,"flash":3.99,"melhor":"Seven","economia":1.50},
            {"categoria":"Doces","produto":"Goma de Mascar TRIDENT Fresh 8g","market":2.99,"seven":2.39,"flash":2.09,"melhor":"Flash","economia":0.90},
            {"categoria":"Limpeza","produto":"Amaciante DOWNY Concentrado 450ml","market":10.9,"seven":8.99,"flash":0,"melhor":"Seven","economia":1.91},
            {"categoria":"Limpeza","produto":"Desinfetante PINHO SOL Lavanda 500ml","market":6.99,"seven":5.79,"flash":0,"melhor":"Seven","economia":1.20},
            {"categoria":"Limpeza","produto":"Detergente YPÊ Neutro 500ml","market":2.79,"seven":2.29,"flash":1.99,"melhor":"Flash","economia":0.80},
            {"categoria":"Limpeza","produto":"Esponja BOMBRIL Limpeza Pesada 3un","market":3.99,"seven":3.29,"flash":0,"melhor":"Seven","economia":0.70},
            {"categoria":"Limpeza","produto":"Limpador Multiuso VEJA 500ml","market":5.49,"seven":4.49,"flash":0,"melhor":"Seven","economia":1.00},
            {"categoria":"Limpeza","produto":"Papel Higiênico NEVE Folha Dupla 12 rolos","market":24.9,"seven":19.9,"flash":0,"melhor":"Seven","economia":5.00},
            {"categoria":"Limpeza","produto":"Sabão em Pó OMO Lavagem Perfeita 800g","market":13.9,"seven":10.9,"flash":0,"melhor":"Seven","economia":3.00},
            {"categoria":"Mercearia","produto":"Achocolatado em Pó NESCAU 2.0 400g","market":12.9,"seven":9.99,"flash":8.59,"melhor":"Flash","economia":4.31},
            {"categoria":"Mercearia","produto":"Açúcar UNIÃO Cristal 1kg","market":5.49,"seven":4.99,"flash":4.75,"melhor":"Flash","economia":0.74},
            {"categoria":"Mercearia","produto":"Arroz CAMIL Tipo 1 1kg","market":6.99,"seven":5.99,"flash":5.79,"melhor":"Flash","economia":1.20},
            {"categoria":"Mercearia","produto":"Arroz TIO JOÃO Integral 1kg","market":9.49,"seven":7.99,"flash":0,"melhor":"Seven","economia":1.50},
            {"categoria":"Mercearia","produto":"Azeite GALLO Extra Virgem 500ml","market":34.9,"seven":29.9,"flash":0,"melhor":"Seven","economia":5.00},
            {"categoria":"Mercearia","produto":"Batata Palha YOKI 120g","market":7.99,"seven":6.49,"flash":0,"melhor":"Seven","economia":1.50},
            {"categoria":"Mercearia","produto":"Café Tradicional 3 CORAÇÕES a Vácuo 250g","market":34.98,"seven":28.99,"flash":5.19,"melhor":"Flash","economia":29.79},
            {"categoria":"Mercearia","produto":"Café PILÃO Torrado e Moído 250g","market":11.9,"seven":9.49,"flash":8.39,"melhor":"Flash","economia":3.51},
            {"categoria":"Mercearia","produto":"Cappuccino MELITTA Tradicional 200g","market":35.9,"seven":16.7,"flash":9.71,"melhor":"Flash","economia":26.19},
            {"categoria":"Mercearia","produto":"Cereal Matinal NESCAU Cereal 230g","market":10.9,"seven":8.49,"flash":0,"melhor":"Seven","economia":2.41},
            {"categoria":"Mercearia","produto":"Cereal NESFIT 230g","market":11.9,"seven":9.49,"flash":0,"melhor":"Seven","economia":2.41},
            {"categoria":"Mercearia","produto":"Chá Matte LEÃO Natural 40g","market":5.49,"seven":4.49,"flash":0,"melhor":"Seven","economia":1.00},
            {"categoria":"Mercearia","produto":"Creme de Leite NESTLÉ 200g","market":4.49,"seven":3.49,"flash":2.99,"melhor":"Flash","economia":1.50},
            {"categoria":"Mercearia","produto":"Ervilha em Conserva QUERO 200g","market":3.99,"seven":3.19,"flash":2.49,"melhor":"Flash","economia":1.50},
            {"categoria":"Mercearia","produto":"Extrato de Tomate ELEFANTE 340g","market":5.99,"seven":4.79,"flash":3.89,"melhor":"Flash","economia":2.10},
            {"categoria":"Mercearia","produto":"Farinha de Trigo DONA BENTA Tipo 1 1kg","market":6.49,"seven":5.49,"flash":0,"melhor":"Seven","economia":1.00},
            {"categoria":"Mercearia","produto":"Farinha de Trigo SOL Tipo 1 1kg","market":6.49,"seven":5.49,"flash":0,"melhor":"Seven","economia":1.00},
            {"categoria":"Mercearia","produto":"Farofa Pronta YOKI Tradicional 250g","market":6.49,"seven":5.19,"flash":0,"melhor":"Seven","economia":1.30},
            {"categoria":"Mercearia","produto":"Feijão CAMIL Carioca Tipo 1 1kg","market":9.49,"seven":7.99,"flash":0,"melhor":"Seven","economia":1.50},
            {"categoria":"Mercearia","produto":"Feijão KICALDO Preto 1kg","market":8.99,"seven":7.49,"flash":0,"melhor":"Seven","economia":1.50},
            {"categoria":"Mercearia","produto":"Geleia LINEA Blueberry Zero Adição de Açúcar 230g","market":40.99,"seven":27.7,"flash":10.01,"melhor":"Flash","economia":30.98},
            {"categoria":"Mercearia","produto":"Gelatina DR. OETKER Morango 25g","market":2.49,"seven":1.99,"flash":1.69,"melhor":"Flash","economia":0.80},
            {"categoria":"Mercearia","produto":"Ketchup HEINZ 397g","market":11.9,"seven":9.49,"flash":7.39,"melhor":"Flash","economia":4.51},
            {"categoria":"Mercearia","produto":"Leite de Coco SOCOCO 200ml","market":5.99,"seven":4.79,"flash":0,"melhor":"Seven","economia":1.20},
            {"categoria":"Mercearia","produto":"Macarrão BARILLA Penne 500g","market":9.49,"seven":7.49,"flash":6.39,"melhor":"Flash","economia":3.10},
            {"categoria":"Mercearia","produto":"Macarrão Instantâneo CUP NOODLES Galinha 69g","market":4.49,"seven":3.49,"flash":2.99,"melhor":"Flash","economia":1.50},
            {"categoria":"Mercearia","produto":"Macarrão Instantâneo NISSIN Lámen Galinha 85g","market":3.49,"seven":2.79,"flash":2.29,"melhor":"Flash","economia":1.20},
            {"categoria":"Mercearia","produto":"Macarrão RENATA Espaguete 500g","market":5.49,"seven":4.39,"flash":0,"melhor":"Seven","economia":1.10},
            {"categoria":"Mercearia","produto":"Maionese HELLMANN'S Tradicional 250g","market":6.99,"seven":5.49,"flash":4.55,"melhor":"Flash","economia":2.44},
            {"categoria":"Mercearia","produto":"Milho Verde em Conserva QUERO 200g","market":3.99,"seven":3.19,"flash":2.49,"melhor":"Flash","economia":1.50},
            {"categoria":"Mercearia","produto":"Molho de Tomate POMAROLA Tradicional 340g","market":3.49,"seven":2.79,"flash":2.09,"melhor":"Flash","economia":1.40},
            {"categoria":"Mercearia","produto":"Molho de Tomate QUERO Tradicional 340g","market":3.49,"seven":2.79,"flash":2.09,"melhor":"Flash","economia":1.40},
            {"categoria":"Mercearia","produto":"Mostarda HEINZ 255g","market":33.9,"seven":19.6,"flash":6.61,"melhor":"Flash","economia":27.29},
            {"categoria":"Mercearia","produto":"Óleo de Soja LIZA 900ml","market":8.49,"seven":6.99,"flash":5.98,"melhor":"Flash","economia":2.51},
            {"categoria":"Mercearia","produto":"Óleo de Soja SOYA 900ml","market":8.49,"seven":6.99,"flash":5.89,"melhor":"Flash","economia":2.60},
            {"categoria":"Mercearia","produto":"Pipoca para Micro-ondas YOKI Manteiga 100g","market":4.99,"seven":3.99,"flash":0,"melhor":"Seven","economia":1.00},
            {"categoria":"Mercearia","produto":"Sal CISNE Refinado 1kg","market":2.99,"seven":2.49,"flash":2.18,"melhor":"Flash","economia":0.81},
            {"categoria":"Mercearia","produto":"Tempero SAZÓN Amarelo 60g","market":5.49,"seven":4.39,"flash":3.79,"melhor":"Flash","economia":1.70},
            {"categoria":"Mercearia","produto":"Vinagre CASTELO Álcool 750ml","market":3.49,"seven":2.79,"flash":0,"melhor":"Seven","economia":0.70},
            {"categoria":"Pães e Bolos","produto":"Bisnaguinha PULLMAN 300g","market":7.49,"seven":5.99,"flash":0,"melhor":"Seven","economia":1.50},
            {"categoria":"Pães e Bolos","produto":"Pão de Forma PULLMAN Tradicional 400g","market":7.99,"seven":6.49,"flash":0,"melhor":"Seven","economia":1.50},
            {"categoria":"Pães e Bolos","produto":"Pão de Hambúrguer PULLMAN 200g","market":6.99,"seven":5.49,"flash":0,"melhor":"Seven","economia":1.50},
            {"categoria":"Pães e Bolos","produto":"Pão de Hot Dog PULLMAN 200g","market":6.99,"seven":5.49,"flash":0,"melhor":"Seven","economia":1.50},
            {"categoria":"Pães e Bolos","produto":"Torrada BAUDUCCO Integral 160g","market":5.99,"seven":4.79,"flash":0,"melhor":"Seven","economia":1.20},
            {"categoria":"Pães e Bolos","produto":"Torrada MARILAN Tradicional 160g","market":5.49,"seven":4.39,"flash":3.79,"melhor":"Flash","economia":1.70},
            {"categoria":"Pet","produto":"Petisco para Cães PEDIGREE Dentastix 7 unidades","market":19.9,"seven":16.9,"flash":0,"melhor":"Seven","economia":3.00},
            {"categoria":"Pet","produto":"Ração para Cães PEDIGREE Adultos Carne 1kg","market":16.9,"seven":13.9,"flash":0,"melhor":"Seven","economia":3.00},
            {"categoria":"Pet","produto":"Ração para Gatos WHISKAS Adultos Carne 1kg","market":19.9,"seven":16.9,"flash":0,"melhor":"Seven","economia":3.00},
            {"categoria":"Refrigerados","produto":"Bebida Láctea YoPRO Morango 250ml","market":7.49,"seven":5.99,"flash":4.99,"melhor":"Flash","economia":2.50},
            {"categoria":"Refrigerados","produto":"Iogurte ACTIVIA Líquido Ameixa 170g","market":3.49,"seven":2.79,"flash":2.49,"melhor":"Flash","economia":1.00},
            {"categoria":"Refrigerados","produto":"Iogurte Grego DANONE Frutas Vermelhas 90g","market":3.99,"seven":3.19,"flash":2.79,"melhor":"Flash","economia":1.20},
            {"categoria":"Refrigerados","produto":"Iogurte Líquido NINHO Morango 180g","market":3.49,"seven":2.79,"flash":2.49,"melhor":"Flash","economia":1.00},
            {"categoria":"Refrigerados","produto":"Leite Condensado MOÇA 395g","market":9.49,"seven":6.99,"flash":5.79,"melhor":"Flash","economia":3.70},
            {"categoria":"Refrigerados","produto":"Leite Fermentado YAKULT 480g","market":8.99,"seven":7.99,"flash":7.39,"melhor":"Flash","economia":1.60},
            {"categoria":"Refrigerados","produto":"Leite ITALAC Integral 1L","market":5.99,"seven":5.19,"flash":4.79,"melhor":"Flash","economia":1.20},
            {"categoria":"Refrigerados","produto":"Manteiga C/ Sal PRÉSIDENT Gastronomique 200g","market":26.28,"seven":12.9,"flash":4.89,"melhor":"Flash","economia":21.39},
            {"categoria":"Refrigerados","produto":"Queijo Mussarela TIROLEZ Fatiado 150g","market":9.49,"seven":8.49,"flash":0,"melhor":"Seven","economia":1.00},
            {"categoria":"Refrigerados","produto":"Queijo Prato PRESIDENTE Fatiado 150g","market":10.9,"seven":8.9,"flash":0,"melhor":"Seven","economia":2.00},
            {"categoria":"Refrigerados","produto":"Requeijão CATUPIRY Original 220g","market":10.9,"seven":9.9,"flash":0,"melhor":"Seven","economia":1.00},
            {"categoria":"Snacks Salgados","produto":"Amendoim Torrado Sem Pele DORI 150g","market":8.99,"seven":7.19,"flash":0,"melhor":"Seven","economia":1.80},
            {"categoria":"Snacks Salgados","produto":"Amendoim Japonês ELMA CHIPS 145g","market":8.99,"seven":7.19,"flash":0,"melhor":"Seven","economia":1.80},
            {"categoria":"Snacks Salgados","produto":"Aveia em Flocos QUAKER 165g","market":5.99,"seven":4.79,"flash":0,"melhor":"Seven","economia":1.20},
            {"categoria":"Snacks Salgados","produto":"Barra de Cereal NUTRY Castanha 22g","market":2.49,"seven":1.99,"flash":0,"melhor":"Seven","economia":0.50},
            {"categoria":"Snacks Salgados","produto":"Castanha de Caju Torrada e Salgada 100g","market":12.9,"seven":9.99,"flash":0,"melhor":"Seven","economia":2.91},
            {"categoria":"Snacks Salgados","produto":"Chia em Grãos 100g","market":9.99,"seven":7.99,"flash":0,"melhor":"Seven","economia":2.00},
            {"categoria":"Snacks Salgados","produto":"Granola Tradicional 250g","market":10.9,"seven":8.99,"flash":0,"melhor":"Seven","economia":1.91},
            {"categoria":"Snacks Salgados","produto":"Linhaça Dourada Moída 200g","market":8.99,"seven":7.19,"flash":0,"melhor":"Seven","economia":1.80},
            {"categoria":"Snacks Salgados","produto":"Mix de Nuts 150g","market":18.9,"seven":14.9,"flash":0,"melhor":"Seven","economia":4.00},
            {"categoria":"Snacks Salgados","produto":"Quinoa em Grãos 200g","market":14.9,"seven":11.9,"flash":0,"melhor":"Seven","economia":3.00},
            {"categoria":"Snacks Salgados","produto":"Suco Integral de Uva Aurora 1,5L","market":19.9,"seven":16.9,"flash":0,"melhor":"Seven","economia":3.00},
            {"categoria":"Snacks Salgados","produto":"Batata Chips LAYS Original 145g","market":11.9,"seven":9.49,"flash":0,"melhor":"Seven","economia":2.41},
            {"categoria":"Snacks Salgados","produto":"Biscoito Polvilho GLOBO 100g","market":6.99,"seven":5.59,"flash":0,"melhor":"Seven","economia":1.40},
            {"categoria":"Snacks Salgados","produto":"Cebolitos ELMA CHIPS 60g","market":4.99,"seven":3.99,"flash":0,"melhor":"Seven","economia":1.00},
            {"categoria":"Snacks Salgados","produto":"Pipoca Doce YOKI Caramelo 150g","market":8.99,"seven":7.19,"flash":0,"melhor":"Seven","economia":1.80},
            {"categoria":"Snacks Salgados","produto":"Pipoca Salgada YOKI 150g","market":7.99,"seven":6.39,"flash":0,"melhor":"Seven","economia":1.60},
            {"categoria":"Snacks Salgados","produto":"Torrada Integral WICKBOLD 140g","market":5.99,"seven":4.79,"flash":0,"melhor":"Seven","economia":1.20},
            {"categoria":"Snacks Salgados","produto":"Salgadinho CHEETOS Onda Requeijão 140g","market":10.9,"seven":8.99,"flash":7.09,"melhor":"Flash","economia":3.81},
            {"categoria":"Snacks Salgados","produto":"Salgadinho DORITOS Queijo Nacho 140g","market":10.9,"seven":8.99,"flash":7.09,"melhor":"Flash","economia":3.81},
            {"categoria":"Snacks Salgados","produto":"Salgadinho FANDANGOS Presunto 140g","market":9.99,"seven":7.99,"flash":7.09,"melhor":"Flash","economia":2.90},
            {"categoria":"Snacks Salgados","produto":"Salgadinho PRINGLES Original 114g","market":14.9,"seven":11.9,"flash":10.59,"melhor":"Flash","economia":4.31},
            {"categoria":"Snacks Salgados","produto":"Salgadinho RUFFLES Original 135g","market":10.9,"seven":8.99,"flash":7.09,"melhor":"Flash","economia":3.81},
            {"categoria":"Utilidades do Lar","produto":"Baterias DURACELL AA Com 16 Unidades","market":49.81,"seven":44.87,"flash":35.79,"melhor":"Flash","economia":14.02}
        ];
        
        let allData = dadosCompletos;
        let filteredData = [...dadosCompletos];
        let charts = {};
        
        function initDashboard() {
            populateCategoryFilter();
            updateDashboard();
        }
        
        function populateCategoryFilter() {
            const categories = [...new Set(allData.map(p => p.categoria))].sort();
            const select = document.getElementById('categoryFilter');
            categories.forEach(cat => {
                const option = document.createElement('option');
                option.value = cat;
                option.textContent = cat;
                select.appendChild(option);
            });
        }
        
        function updateDashboard() {
            updateKPIs();
            updateDistributionChart();
            updateCategoriaChart();
            updateTopEconomiaChart();
            updateTable();
        }
        
        function updateKPIs() {
            const totalProdutos = filteredData.length;
            const marketMelhor = filteredData.filter(p => p.melhor === 'Market4You').length;
            const sevenMelhor = filteredData.filter(p => p.melhor === 'Seven').length;
            const flashMelhor = filteredData.filter(p => p.melhor === 'Flash').length;
            
            const economiaMaxima = filteredData.reduce((sum, p) => sum + p.economia, 0);
            
            document.getElementById('totalProdutos').textContent = totalProdutos;
            document.getElementById('marketMelhor').textContent = marketMelhor;
            document.getElementById('sevenMelhor').textContent = sevenMelhor;
            document.getElementById('flashMelhor').textContent = flashMelhor;
            document.getElementById('economiaMaxima').textContent = `R$ ${economiaMaxima.toFixed(2)}`;
        }
        
        function updateDistributionChart() {
            const ctx = document.getElementById('distributionChart').getContext('2d');
            
            const marketCount = filteredData.filter(p => p.melhor === 'Market4You').length;
            const sevenCount = filteredData.filter(p => p.melhor === 'Seven').length;
            const flashCount = filteredData.filter(p => p.melhor === 'Flash').length;
            
            if (charts.distribution) charts.distribution.destroy();
            
            charts.distribution = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Market4You', 'Seven', 'Flash'],
                    datasets: [{
                        data: [marketCount, sevenCount, flashCount],
                        backgroundColor: ['#ef4444', '#22c55e', '#3b82f6']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
        }
        
        function updateCategoriaChart() {
            const categorias = {};
            filteredData.forEach(p => {
                if (!categorias[p.categoria]) {
                    categorias[p.categoria] = { market: 0, seven: 0, flash: 0 };
                }
                if (p.melhor === 'Market4You') categorias[p.categoria].market++;
                else if (p.melhor === 'Seven') categorias[p.categoria].seven++;
                else if (p.melhor === 'Flash') categorias[p.categoria].flash++;
            });
            
            const ctx = document.getElementById('categoriaChart').getContext('2d');
            if (charts.categoria) charts.categoria.destroy();
            
            charts.categoria = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(categorias),
                    datasets: [
                        { label: 'Market4You', data: Object.values(categorias).map(c => c.market), backgroundColor: '#ef4444' },
                        { label: 'Seven', data: Object.values(categorias).map(c => c.seven), backgroundColor: '#22c55e' },
                        { label: 'Flash', data: Object.values(categorias).map(c => c.flash), backgroundColor: '#3b82f6' }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { stacked: true, ticks: { maxRotation: 45, minRotation: 45, font: { size: 10 } } },
                        y: { stacked: true }
                    }
                }
            });
        }
        
        function updateTopEconomiaChart() {
            const topEconomias = filteredData
                .filter(p => p.melhor === 'Flash')
                .sort((a, b) => b.economia - a.economia)
                .slice(0, 15);
            
            const ctx = document.getElementById('topEconomiaChart').getContext('2d');
            if (charts.topEconomia) charts.topEconomia.destroy();
            
            charts.topEconomia = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: topEconomias.map(p => p.produto.substring(0, 35)),
                    datasets: [{
                        label: 'Economia (R$)',
                        data: topEconomias.map(p => p.economia),
                        backgroundColor: '#3b82f6'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: { legend: { display: false } },
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: { callback: function(value) { return 'R$ ' + value.toFixed(2); } }
                        }
                    }
                }
            });
        }
        
        function updateTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            const sortedData = [...filteredData].sort((a, b) => b.economia - a.economia);
            
            sortedData.forEach(produto => {
                const row = document.createElement('tr');
                
                let badgeClass = '';
                if (produto.melhor === 'Market4You') badgeClass = 'badge-market';
                else if (produto.melhor === 'Seven') badgeClass = 'badge-seven';
                else badgeClass = 'badge-flash';
                
                row.innerHTML = `
                    <td>${produto.categoria}</td>
                    <td>${produto.produto}</td>
                    <td>R$ ${produto.market.toFixed(2)}</td>
                    <td>${produto.seven > 0 ? 'R$ ' + produto.seven.toFixed(2) : '-'}</td>
                    <td>${produto.flash > 0 ? 'R$ ' + produto.flash.toFixed(2) : '-'}</td>
                    <td><span class="badge ${badgeClass}">${produto.melhor}</span></td>
                    <td style="color: #10b981; font-weight: bold;">
                        ${produto.economia > 0 ? 'R$ ' + produto.economia.toFixed(2) : '-'}
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }
        
        // Event Listeners
        document.getElementById('categoryFilter').addEventListener('change', filterData);
        document.getElementById('searchFilter').addEventListener('input', filterData);
        document.getElementById('priceFilter').addEventListener('change', filterData);
        
        function filterData() {
            const category = document.getElementById('categoryFilter').value;
            const search = document.getElementById('searchFilter').value.toLowerCase();
            const priceFilter = document.getElementById('priceFilter').value;
            
            filteredData = allData.filter(produto => {
                let pass = true;
                
                if (category && produto.categoria !== category) pass = false;
                if (search && !produto.produto.toLowerCase().includes(search)) pass = false;
                if (priceFilter && produto.melhor !== priceFilter) pass = false;
                
                return pass;
            });
            
            updateDashboard();
        }
        
        // Inicializar
        window.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>
